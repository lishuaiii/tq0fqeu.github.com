---
title: 'React Native Components Image'
date: 2015-07-28 10:04:00
description: React Native文档中文翻译
---

## Image
一个React组件用来展现不同类型的图片，包括网络图片，静态资源，临时本地图片和来自本地硬盘的图片，比如相机图片册。


用法举例

```javascript
renderImages: function() {
  return (
    <View>
      <Image
        style={styles.icon}
        source={require('image!myIcon')}
      />
      <Image
        style={styles.logo}
        source={ {uri: 'http://facebook.github.io/react/img/logo_og.png'}}
      />
    </View>
  );
},
```

###属性
#### accessibilityLabel 字符串
> 当用户选中这个图片时，屏幕助手将读出这个字段。

#### accessible 布尔值
> 为真时，该图片可被选中。

#### capInsets {top: number, left: number, bottom: number, right: number}
> 当图片被拉拽后，capInsets将指定图片四角为一个固定尺寸，但是图片的中间内容和四边还是会随图片拉拽变化而变化。这个一般用于创建可拉拽的圆角按钮，阴影和其他可被拉拽的资源。更多信息在 [Apple documentation](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets)

#### defaultSource 字符串 {uri: string}
> 当从网络上下载图片时展现的静态图片。

#### onError 函数
> 当加载错误时触发。{nativeEvent: {error}}

#### onLayout 函数
> 当加载或者布局改变时触发。{nativeEvent: {layout: {x, y, width, height}}}

#### onLoad 函数
> 当成功加载完成时触发。

#### onLoadEnd 函数
> 当加载完成时触发，无论成功还是失败。

#### onLoadStart 函数
> 当开始加载时触发。

#### onProgress 函数
> 当下载时触发。{nativeEvent: {loaded, total}}

#### resizeMode 枚举 ['cover','contain','stretch']
> 当外框和图片尺寸不一致时，决定采用哪种方式拉拽图片。

#### source 字符串 {uri: string}
> 图片地址，可以是http地址，本地路径或者图片静态资源名称（需要通过require('image!name')引入）。

#### style style
> - [Flexbox...](https://facebook.github.io/react-native/docs/flexbox.html#proptypes)
  - [Transforms...](https://facebook.github.io/react-native/docs/transforms.html#proptypes)
  - **backgroundColor** 字符串
  - **borderColo**r 字符串
  - **borderRadius** 数字
  - **borderWidth** 数字
  - **opacity** 数字
  - **overflow** 枚举['visible','hidden']
  - **resizeMode** 枚举 ['cover','contain','stretch']
  - **tintColor** 字符串

#### testID 字符串
> 该元素的唯一标识，用于自动化测试脚本

### 描述
#### 静态资源
在项目开发过程中，经常需要增加删除许多图片，并且会突然传送些不再需要的图片，这种情况并不少见。为了解决这个问题，需要分辨出使用中的图片。通过rquire一个标记引入，require('image!name-of-the-asset')是为了唯一的展现图片方法。

```javascript
// GOOD
<Image source={require('image!my-icon')} />

// BAD
var icon = this.props.active ? 'my-icon-active' : 'my-icon-inactive';
<Image source={require('image!' + icon)} />

// GOOD
var icon = this.props.active ? require('image!my-icon-active') : require('image!my-icon-inactive');
<Image source={icon} />
```
如果你的整个代码都按照这个规则管理，你能够做一些有趣的事情，比如自动打包那些在应用中使用的资源。注意，目前这个规则不是必须的，但在未来会是。

用Image.xcassets添加静态资源到应用
![image](https://facebook.github.io/react-native/img/StaticImageAssets.png)
> **注意**
>
> 无论何时，添加新资源到Image.xcassets都需要通过Xcode重新构建应用，重新加载是不够的。


*这个操作正在优化，很快将有改进。*
### 网络资源
许多图片并不是立刻加载完成的，或者是动态加载的。与静态图片不同，你需要手动指定图片长宽。

```javascript
// GOOD
<Image source={ {uri: 'https://facebook.github.io/react/img/logo_og.png'}}
       style={ {width: 400, height: 400}} />

// BAD
<Image source={ {uri: 'https://facebook.github.io/react/img/logo_og.png'}} />
```
### 本地文件系统资源
参考 [CameraRoll](https://facebook.github.io/react-native/docs/cameraroll.html) 对于使用Image.xcassets以外的本地资源的例子。
#### 最佳相机图片册
iOS在相机图片册存储多种长宽的图片，这对于选择一张合适的图片去展现最佳效果是非常重要的。你不会希望选择一张高清的3264x2448的图片去用来当作200x200的缩略图。如果有最佳匹配，React Native将会选取，否则将会选择大于实际要求50%的第一个图片，这是为了避免在拉拽重置时模糊。所有这些操作都是默认执行的，所以你不用操心去写这些麻烦的代码。
### 为什么不是所有的东西都自动设置长宽？
在浏览器上，如果你不指定一个图片的长宽，那么浏览器将会展现一个0x0的元素，接着下载图片并将用图片实际的长宽展现。这样做最大的问题是，用户界面会在图片加载过程中跳动，这个体验非常不好。
在React Native上，这个行为被有意的没有实现。或许这样做会让开发者需要了解图片的实际长宽，但这样会对用户体验更好。通过require('image!x')语法能自动指定长宽，因为在加载时，图片的长宽已被记录。

比如，前面那个图片的通过require('image!logo')的结果是

```javascript
{"__packager_asset":true,"isStatic":true,"path":"/Users/react/HelloWorld/iOS/Images.xcassets/react.imageset/logo.png","uri":"logo","width":591,"height":573}
```

### 把图片源当作一个对象
在React Native，一个有趣的决定是把src属性命名为source，并且接受的值不是字符串而是一个带有uri属性的对象。

```javascript
<Image source={ {uri: 'something.jpg'}} />
```
